//¼­ºñ½º
package com.cs.study.signup.service;

import com.cs.study.signup.mapper.SignupMapper;
import com.cs.study.signup.vo.SignupVO;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class SignupService {
    public final SignupMapper signupMapper;

    public SignupService(SignupMapper signupMapper) {
        this.signupMapper = signupMapper;
    }

    public boolean insertSignup(SignupVO signupVO){

        // 1. íŒ¨ìŠ¤ì›Œë“œ ì¼ì¹˜ í™•ì¸
        // 1-1. ê°’ì´ ë‹¤ë¥´ë©´? : ì¬ì‹œë„
        if ( !signupVO.getUserPw().equals( signupVO.getUserPwChk() ) ) {
            // ì„œë¹„ìŠ¤ -> ì»¨íŠ¸ë¡¤ëŸ¬
            // ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì„œë¹„ìŠ¤ê°€ ì •ìƒì‘ë™í•œì§€ ì²´í¬í•´ì„œ 
            // ì •ìƒì´ë¼ë©´? í™”ë©´ì´ë™í•˜ê³ 
            // ë¹„ì •ìƒì´ë¼ë©´? íšŒì›ê°€ì… í™”ë©´ìœ¼ë¡œ signupVO ê°€ì§€ê³  ëŒì•„ê°€ë¼ ë™ê¸°ì ë°©ì‹ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.
            return false;
            return false;
        }

        // 2. ì „í™”ë²ˆí˜¸ í•©ì¹˜ê¸°
        signupVO.setPhoneNumber( signupVO.getPhoneNumber1() + signupVO.getPhoneNumber2() + signupVO.getPhoneNumber3() );

        //ë¬¸ìì—´ ì‚¬ì´ì— / - . ì›í•˜ëŠ”ê±° ì…ë ¥í•´ì„œ ê°’ ë„˜ê²¨ì£¼ê¸°,
        
        // 3. ì²´í¬ë°•ìŠ¤ Yì•„ë‹ê²½ìš° ì²´í¬
        if (signupVO.getTermsBuyYn() == null) {
            signupVO.setTermsBuyYn("N");
        }
        if (signupVO.getTermsInfoYn() == null) {
            signupVO.setTermsInfoYn("N");
        }
        if (signupVO.getTermsSellYn() == null) {
            signupVO.setTermsSellYn("N");
        }
        signupMapper.insertSignup(signupVO);
        return true;
    }

}